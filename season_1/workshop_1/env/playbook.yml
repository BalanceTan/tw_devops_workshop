---
- hosts: all
  remote_user: vagrant
  sudo: yes
  tasks:
    - name: install python software properties
      apt: name=python-software-properties state=present
    - name: add oracle jdk repo
      apt_repository: repo="ppa:webupd8team/java"
    - name: add jenkins repo key
      apt_key: url=http://pkg.jenkins-ci.org/debian/jenkins-ci.org.key state=present
    - name: add jenkins repo
      apt_repository: repo="deb http://pkg.jenkins-ci.org/debian binary/"
    - name: apt-get update
      apt: update_cache=yes cache_valid_time=3600
    - name:
      shell: echo oracle-java7-installer shared/accepted-oracle-license-v1-1 select true | sudo /usr/bin/debconf-set-selections
    - name: apt-get install oracle-jdk7-installer
      apt: name=oracle-jdk7-installer state=present install_recommends=yes
    - name: apt-get install jenkins
      apt: name=jenkins state=present
